!function(){var t=[,function(t){t.exports=class{constructor(){this.stateManager=null,this.computed={}}setStateManager(t){this.stateManager=t}defineComputed(t,e,s){this.computed[t]={deps:e,calcFunction:s,value:void 0},this.calculateComputed(t)}calculateComputed(t){const e=this.computed[t],s=e.calcFunction(this.stateManager.state);e.value!==s&&(e.value=s,this.stateManager.domBinder.updateBinding(t,s))}calculateAll(t){Object.keys(this.computed).forEach((e=>{this.computed[e].deps.includes(t)&&this.calculateComputed(e)}))}getComputed(){return this.computed}}},function(t){t.exports=class{constructor(t,e,s){this.state=new Proxy(t,{set:(t,n,a)=>(t[n]!==a&&(t[n]=a,e.updateBinding(n,a),s.calculateAll(n)),!0)}),this.domBinder=e,this.computedManager=s}updateState(t,e){this.state[t]=e}}},function(t,e,s){const n=s(4);t.exports=class{constructor(){this.bindings={},this.methods={}}scanDom(t,e){t.querySelectorAll("[data-bind]").forEach((t=>{const s=t.getAttribute("data-bind"),[n,a]=s.split(":").map((t=>t.trim()));this.setBinding(n,a,t,e)}))}setMethods(t){this.methods=t}setBinding(t,e,s,n){switch(this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push({type:t,element:s}),t){case"click":this.methods[e]&&s.addEventListener("click",(()=>{this.methods[e](n)}));break;case"value":s.addEventListener("input",(()=>{n.updateState(e,s.value)}));break;case"focus":this.methods[e]&&s.addEventListener("focus",(()=>{this.methods[e](n)}));break;case"blur":this.methods[e]&&s.addEventListener("blur",(()=>{this.methods[e](n)}));break;case"change":s.addEventListener("change",(()=>{n.updateState(e,s.value)}));break;case"mouseover":this.methods[e]&&s.addEventListener("mouseover",(()=>{this.methods[e](n)}));break;case"mouseout":this.methods[e]&&s.addEventListener("mouseout",(()=>{this.methods[e](n)}));break;default:console.warn(`サポートされていないイベント タイプ: ${t}`)}}updateBinding(t,e){const s=this.bindings[t];s&&s.forEach((t=>{let s=n(e);switch(t.type){case"text":t.element.textContent=s;break;case"html":t.element.innerHTML=e;break;case"value":t.element.value=s;break;case"style":"object"==typeof e?Object.entries(e).forEach((([e,s])=>{t.element.style[e]=n(s)})):t.element.style.cssText=s}}))}updateAllBindings(t){for(const e in this.bindings)this.updateBinding(e,t[e])}}},function(t){t.exports=t=>String(t).replace(/&/g,"&lt;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}],e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}!function(){const t=s(1),e=s(2),n=s(3);window.BindingEngine=class{constructor(e="app"){this.domBinder=new n,this.computedManager=new t,this.rootElement=document.getElementById(e),this.methods={},this.rootElement||console.error(`ID '${e}' を持つ要素が見つかりません。`)}bindState(t){this.stateManager=new e(t,this.domBinder,this.computedManager),this.domBinder.setMethods(this.methods),this.computedManager.setStateManager(this.stateManager),this.domBinder.scanDom(this.rootElement,this.stateManager),this.domBinder.updateAllBindings(this.stateManager.state)}defineComputed(t,e,s){this.computedManager.defineComputed(t,e,s)}defineMethod(t,e){this.methods[t]=()=>e(this.stateManager)}}}()}();